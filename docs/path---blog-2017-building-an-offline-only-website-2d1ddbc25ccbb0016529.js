webpackJsonp([3306906478069],{740:function(e,n){e.exports={data:{markdownRemark:{html:'<p>This summer I released a small personal project: <a href="https://chris.bolin.co/offline/">Offline</a>. It might be the only website that you forces you offline to view it. (I know, it’s weird.)</p>\n<p>The project’s seed was planted a few years ago when I was having a really hard time concentrating while writing my thesis. I would routinely get lost on the internet, jumping from one Wikipedia page to the next, constantly engaged, but never productive. I got desperate for progress, so I finally tried simply disconnecting my WiFi. It worked. When I got a sudden urge to Google something or check Facebook I was met with a choice: did I really want to be distracted? Did I really want to admit defeat and reconnect?</p>\n<p>I was able to write my thesis. And I kept the trick: if I really need to concentrate, I would try completely disconnecting.</p>\n<p>\n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; z-index: 0 !important;; max-width: 800px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 80.078125%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsTAAALEwEAmpwYAAADJElEQVQ4y4VTZ1NTURDNT9FxkBqKAYQBBaQOiIhICxAkIqDIaBQivRoSAoQkL3npEAiBhF6kF8EP/q3j3htAwFE/nNl79753Zs/uWclM4BDe4BEW1n9w+NfOL3B27RzCwvr5Hzn27yUHg8QbPIZrfhf9WivHyIQTXydd0Ey6MThmx5Dewe8sz+7D4/Q+4QrlKXoW9m6QSmaXjmGf3US1QoGC4mJExMYiLDoa9yIikZyWhvjkZIRFRfN8elYWZKmpCJdKIZXJkJiaBpNzCXPLp78J51fPMG7xoXdgACZBgCBaodWPobJGDqvdBqfHDY1OC6PZDP/iAsqrq+nbfn42W0X4lo84oTd4yEklvpXvmLIH8Sg7HzmFz1BU+hLlNQpk5BYg72kJCkvKUNvQiLLqWp5n3w1pdGjv6qWcAhPWeVK4jenFg1CFvpVTmF3LiEtKQT4RNLW2oaJWgSf5hYhOkCEyLgGxSQ+R8jiTn+9L45CcnkHEufSeSO2RIiOviAj3Q4QzAWro4h6XKTpsMFkEiCTV4aLma0dhsYlcvlEwQ93dheLS59CN6yFYLSTZAoNxiqIdTt8O2DxoKCeweTfQ0PQWLyrlvEp5vRL1jc2orK2Hsvkdr6ZO+QaKxiZk5hWg5pWSo6quntrxGq0qNWyzW9TLE0hYQ5lk1hsm5UFqOsJjExAWE0fy4nEnPOrqfjciBpHxMrKXCOvMBk14GVOOJQju1SvrSFgz2aQEUcQYSZmYMqBvcADZBfl8mj39fdwB6q5OGExGZORkkyddWNr+ySWyGbDKbviQSVY2t6BcLkeb6hNUHWpUyGvILmNo7+zEqF4P9/QMRka1KKuqgsHmB3MHK4YRXeJiU47g9u9BZ/JyjBqmaTM8MNoDHGw7DLZFroJJ1Rg89P0u2IZdX7lrq8e0H0CcXuOuZ/0UCEZHkPwZgMWzAhM72wJXu357f28RHsPj30HvkAbvVR1QqbvxubMHLW0q8uQHfOzowucv3egd1tHe7t+Q9/cKqRcOGrtjbotcz+I27N7NUJwN5Zy+b/8kuiK8fGR+ZGATux1D5+P/kjH8AgBZQdaprrdJAAAAAElFTkSuQmCC\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;"\n        alt="Offline"\n        title=""\n        src="/static/offline-first-0d3c94a157b96d2716f4fa2a384c2883-fc76f.png"\n        srcset="/static/offline-first-0d3c94a157b96d2716f4fa2a384c2883-290b0.png 200w,\n/static/offline-first-0d3c94a157b96d2716f4fa2a384c2883-14201.png 400w,\n/static/offline-first-0d3c94a157b96d2716f4fa2a384c2883-fc76f.png 800w,\n/static/offline-first-0d3c94a157b96d2716f4fa2a384c2883-dc97d.png 1024w"\n        sizes="(max-width: 800px) 100vw, 800px"\n      />\n    </span>\n  </span>\n  </p>\n<p>This summer I decided to take it a step further: could I make a website that forced readers into that same disconnected and focused state? The “offline-first” movement in web development has been gaining momentum (following in the footsteps of the related “mobile-first” trend). Maybe those same principles could be taken further, from offline-first to offline-only.</p>\n<p>In the end I pieced together a small offline-only page. Its logic is pretty simple:</p>\n<ul>\n<li>download all the content</li>\n<li>don’t display the content; instead, prompt the user to disconnect</li>\n<li>wait for a disconnection, then display the content</li>\n<li>if the page is refreshed while disconnected, fetch a cached local copy</li>\n</ul>\n<p>The first step is trivial. The initial request returns HTML that, in turn, requires some scripts. I used React because I’m familiar with it, but any framework could be used to achieve this (including no framework at all). The important detail is that the all of the page’s contents are loaded into memory, but rendered only when the user is offline.</p>\n<p>Next we have to detect if the user is offline. The <a href="https://developer.mozilla.org/en-US/docs/Online_and_offline_events">navigator.onLine</a> property is widely supported in modern browsers. But this is just a static value. In order to respond when the user goes offline, we’d either have to periodically check navigator.onLine, or listen for an event. Luckily browsers also provide <a href="https://developer.mozilla.org/en-US/docs/Online_and_offline_events">“offline” and “online” events</a>.</p>\n<p>In React, this logic can be abstracted into Online and Offline components that only render their children when the browser is online or offline, respectively. I made <a href="https://github.com/chrisbolin/react-detect-offline">react-detect-offline</a> to do exactly this. (Check it out and let me know what you think!)</p>\n<div class="gatsby-highlight">\n      <pre class="language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> Online<span class="token punctuation">,</span> Offline <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">\'react-detect-offline\'</span><span class="token punctuation">;</span>\n\n<span class="token keyword">const</span> <span class="token function-variable function">App</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span>\n  <span class="token operator">&lt;</span>div<span class="token operator">></span>\n    <span class="token operator">&lt;</span>Online<span class="token operator">></span>Only shown when you\'re online<span class="token operator">&lt;</span><span class="token operator">/</span>Online<span class="token operator">></span>\n    <span class="token operator">&lt;</span>Offline<span class="token operator">></span>Only shown <span class="token function">offline</span> <span class="token punctuation">(</span>surprise<span class="token operator">!</span><span class="token punctuation">)</span><span class="token operator">&lt;</span><span class="token operator">/</span>Offline<span class="token operator">></span>\n  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>\n<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>\n      </div>\n<p>The last step is the most complex and the least obvious. If the user refreshes the page while disconnected, we’d like to load a local copy of the page rather than that try (and fail) to fetch a copy from the server. Enter service workers. Luckily, <a href="https://github.com/facebookincubator/create-react-app">Create React App</a> comes with full support for service workers right out of the box. I built Offline on top of Create React App and took advantage of service workers with zero extra effort.</p>\n<p><a href="https://github.com/chrisbolin/offline">Plug all the pieces together</a> and you have a strange little piece of the internet that makes you leave the internet. I hope you enjoyed it (or at least got a laugh).</p>\n<div>\n          <div\n            class="gatsby-resp-iframe-wrapper"\n            style="padding-bottom: 9.090909090909092%; position: relative; height: 0; overflow: hidden;"\n          >\n            <p>\n<iframe src="https://ghbtns.com/github-btn.html?user=chrisbolin&amp;type=follow&amp;count=true" frameborder="0" scrolling="0" style="\n            position: absolute;\n            top: 0;\n            left: 0;\n            width: 100%;\n            height: 100%;\n          "></iframe>\n</p>\n          </div>\n          </div>',fields:{slug:"/blog/2017/building-an-offline-only-website/"},frontmatter:{id:52,authorId:21,categoryIds:[1,18],date:"2017-09-27",pageDescription:"The offline-first movement in web development has been gaining momentum (following in the footsteps of the related “mobile-first” trend). Maybe those same principles could be taken further, from offline-first to offline-only.",pageKeywords:"Offline, Offline-Only, Building an Offline Website, React, JavaScript",pageTitle:"Building an Offline-First Website",path:"/2017/building-an-offline-first-website/",title:"Building an Offline-Only Website"}}},pathContext:{slug:"/blog/2017/building-an-offline-only-website/",prev:{fields:{slug:"/blog/2017/introducing-electron-webpack-dashboard/"},frontmatter:{authorId:9,categoryIds:[5,4],date:"2017-08-16",id:51,title:"Introducing Electron Webpack Dashboard"}}}}}});